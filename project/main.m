clc;
clear;
close all;
addpath(genpath('./'));

% test for load_map
disp('loading map');
% voxel's width depth and height better to be the same value
v = 0.1;
v2 = 0.1;
voxel = [v,v,v2];
map = load_map('C:\Users\Administrator\Desktop\project\maps\map0.txt', voxel );
map.occgrid;
start = [0,0,0];
goal = [7,6,1];

%path = dijkstra( map , start, goal);
%path = CEM( map , start, goal)

path =[ 0         0         0
    0.0508    0.0588    0.0316
    0.1016    0.1176    0.0632
    0.1525    0.1764    0.0947
    0.2033    0.2352    0.1263
    0.2541    0.2940    0.1579
    0.3049    0.3528    0.1895
    0.4416    0.5684    0.2438
    0.5783    0.7840    0.2982
    0.7150    0.9996    0.3525
    0.8517    1.2152    0.4068
    0.9883    1.4308    0.4612
    1.1250    1.6464    0.5155
    1.4813    1.8834    0.4605
    1.8376    2.1204    0.4055
    2.1939    2.3574    0.3504
    2.5501    2.5944    0.2954
    2.9064    2.8314    0.2403
    3.2627    3.0685    0.1853
    3.3747    3.1536    0.2217
    3.4866    3.2387    0.2582
    3.5986    3.3238    0.2946
    3.7106    3.4090    0.3311
    3.8226    3.4941    0.3675
    3.9345    3.5792    0.4040
    4.2199    3.7901    0.4600
    4.5053    4.0010    0.5160
    4.7907    4.2118    0.5720
    5.0760    4.4227    0.6280
    5.3614    4.6335    0.6840
    5.6468    4.8444    0.7400
    5.7584    4.9159    0.7526
    5.8700    4.9874    0.7652
    5.9816    5.0589    0.7778
    6.0933    5.1304    0.7904
    6.2049    5.2019    0.8029
    6.3165    5.2733    0.8155
    6.4304    5.3945    0.8463
    6.5443    5.5156    0.8770
    6.6583    5.6367    0.9078
    6.7722    5.7578    0.9385
    6.8861    5.8789    0.9693
    7.0000    6.0000    1.0000];
path1 = [
    0         0         0
    0.0833    0.0833    0.0833
    0.1667    0.1667    0.1667
    0.2500    0.2500    0.2500
    0.3333    0.3333    0.3333
    0.4167    0.4167    0.4167
    0.5000    0.5000    0.5000
    0.5000    0.8333    0.5000
    0.5000    1.1667    0.5000
    0.5000    1.5000    0.5000
    0.5000    1.8333    0.5000
    0.5000    2.1667    0.5000
    0.5000    2.5000    0.5000
    1.0000    2.5000    0.5000
    1.5000    2.5000    0.5000
    2.0000    2.5000    0.5000
    2.5000    2.5000    0.5000
    3.0000    2.5000    0.5000
    3.5000    2.5000    0.5000
    3.5000    2.6667    0.5000
    3.5000    2.8333    0.5000
    3.5000    3.0000    0.5000
    3.5000    3.1667    0.5000
    3.5000    3.3333    0.5000
    3.5000    3.5000    0.5000
    4.0000    3.5000    0.5000
    4.5000    3.5000    0.5000
    5.0000    3.5000    0.5000
    5.5000    3.5000    0.5000
    6.0000    3.5000    0.5000
    6.5000    3.5000    0.5000
    6.5000    3.8333    0.5000
    6.5000    4.1667    0.5000
    6.5000    4.5000    0.5000
    6.5000    4.8333    0.5000
    6.5000    5.1667    0.5000
    6.5000    5.5000    0.5000
    6.5833    5.5833    0.5833
    6.6667    5.6667    0.6667
    6.7500    5.7500    0.7500
    6.8333    5.8333    0.8333
    6.9167    5.9167    0.9167
    7.0000    6.0000    1.0000];
path3 = CEM( map , start, goal);
collision_check( map , path3)
plot(path3(:,1), path3(:,2), '-r');
% todo 
% combine the result of dijkstra and CEM
% more robust collision checking constant step or algebric methods

